<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiểm tra: Kỹ thuật trồng lúa cơ bản - Sổ tay nông dân</title>
    <link rel="stylesheet" href="styles/quiz.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
</head>
<body>
    <div class="quiz-container">
        <!-- Screen 1: Start Screen -->
        <div id="start-screen" class="quiz-screen active">
            <div class="card">
                <i class="fas fa-feather-alt icon-start"></i>
                <h1>Kiểm tra: Kỹ thuật trồng lúa cơ bản</h1>
                <p class="quiz-rules">
                    <span><i class="fas fa-question-circle"></i> 20 câu hỏi</span>
                    <span><i class="fas fa-clock"></i> 15 phút</span>
                </p>
                <div class="quiz-info">
                    <span id="attempts-info">Số lần đã thi: 0</span>
                    <span id="highscore-info">Điểm cao nhất: 0/20</span>
                </div>
                <p>Bài kiểm tra này sẽ đánh giá kiến thức của bạn về các kỹ thuật canh tác lúa. Hãy đảm bảo bạn đã sẵn sàng trước khi bắt đầu.</p>
                <button id="start-btn" class="btn btn-primary">Tôi đã sẵn sàng!</button>
                 <a href="dash.html#quiz" class="back-link">Quay lại trang Kiểm tra</a>
            </div>
        </div>

        <!-- Screen 2: Quiz Screen -->
        <div id="quiz-screen" class="quiz-screen">
            <header class="quiz-header">
                <a href="#" id="exit-quiz-btn" class="exit-btn" title="Thoát bài kiểm tra"><i class="fas fa-times"></i></a>
                <div class="timer">
                    <i class="fas fa-stopwatch"></i>
                    <span id="time-left">15:00</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="progress-text">
                    Câu <span id="current-question-num">1</span>/20
                </div>
            </header>
            <div id="question-container" class="card">
                <!-- Questions will be injected here by JS -->
            </div>
            <div id="navigation-footer" class="quiz-footer">
                <button id="prev-btn" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Câu trước</button>
                <button id="next-btn" class="btn btn-primary">Câu tiếp theo <i class="fas fa-arrow-right"></i></button>
                <button id="submit-btn" class="btn">Nộp bài</button>
            </div>
        </div>

        <!-- Screen 3: Results Screen -->
        <div id="results-screen" class="quiz-screen">
            <div class="card">
                <i class="fas fa-trophy icon-result"></i>
                <h1>Hoàn thành!</h1>
                <p>Bạn đã hoàn thành bài kiểm tra.</p>
                <div class="score-container">
                    Điểm của bạn: <span id="score-text">0 / 20</span>
                </div>
                <div id="result-message"></div>
                <div class="result-actions">
                    <!-- SỬA LỖI: Chuyển thẻ <a> thành <button> -->
                    <button id="retake-btn" class="btn">Làm lại bài thi</button>
                    <button id="review-btn" class="btn btn-primary">Xem lại bài làm</button>
                </div>
            </div>
            <div id="review-container">
                <div class="result-actions" style="margin-top: 20px;">
                    <a href="dash.html#quiz" class="btn">Về trang Kiểm tra</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Overlays & Modals -->
    <div id="loading-overlay">
        <div class="spinner"></div>
        <p>Đang lưu kết quả...</p>
    </div>
    <div id="confirmation-modal" class="modal-overlay">
        <div class="modal-box">
            <h3 id="confirm-title">Xác nhận</h3>
            <p id="confirm-message"></p>
            <div class="modal-actions">
                <button id="cancel-submit-btn" class="btn btn-secondary">Hủy</button>
                <button id="confirm-submit-btn" class="btn btn-primary">Thoát</button>
            </div>
        </div>
    </div>
    <div id="resume-modal" class="modal-overlay">
        <div class="modal-box">
            <h3>Tiếp tục bài làm?</h3>
            <p>Chúng tôi nhận thấy bạn có một bài kiểm tra đang dang dở. Bạn có muốn tiếp tục từ nơi đã dừng lại không?</p>
            <div class="modal-actions">
                <button id="resume-no-btn" class="btn btn-secondary">Làm bài mới</button>
                <button id="resume-yes-btn" class="btn btn-primary">Tiếp tục</button>
            </div>
        </div>
    </div>
    
    <!-- SỬA LỖI: Thêm modal thông báo chung -->
    <div id="alert-modal" class="modal-overlay">
        <div class="modal-box">
            <h3 id="alert-title">Thông báo</h3>
            <p id="alert-message"></p>
            <div class="modal-actions">
                <button id="alert-close-btn" class="btn btn-primary">Đã hiểu</button>
            </div>
        </div>
    </div>

    <script src="logic/quiz.js"></script>
</body>
</html>
